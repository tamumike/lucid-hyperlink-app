(function(){(this||window).webpackJsonp.registerAbsMids({"esri/views/2d/layers/FeatureLayerView2D":1333,"esri/core/HandleOwner":1393,"esri/views/2d/engine/DisplayObject":1411,"esri/views/layers/RefreshableLayerView":1412,"esri/views/layers/LayerView":1413,"esri/views/2d/engine/Container":1425,"esri/views/2d/engine/Evented":1434,"esri/renderers/support/clickToleranceUtils":1438,"esri/views/2d/layers/LayerView2D":1456,"esri/support/graphicUtils":1638,"esri/views/layers/support/popupUtils":1639,"esri/views/2d/layers/support/popupUtils2D":1737,"esri/views/2d/layers/features/controllers":1776,"esri/views/layers/FeatureLayerView":1835,"esri/views/2d/layers/features/tileRenderers":2315,"esri/views/2d/layers/support/FeatureLayerProxy":2316,"esri/views/2d/layers/support/util":2317})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{1333:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(2),r(1),r(60),r(10),r(32),r(45),r(21),r(9),r(8),r(15),r(0),r(24),r(126),r(97),r(1425),r(1456),r(1776),r(2315),r(2316),r(1737),r(515),r(1835)],void 0===(i=function(e,t,r,n,i,o,s,a,u,l,p,c,d,h,y,f,v,g,m,b,_,R,O,w){var x=h.ensureType(f);return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._pipelineIsUpdating=!1,t.container=new v.Container,t}return r(t,e),t.prototype.destroy=function(){this._proxy.destroy()},t.prototype.initialize=function(){this._proxy=this._createProxy(),this.addResolvingPromise(p.all([m.getControllerConfiguration(this.layer),this._proxy.when()]).then(function(e){var t=e[0];return e[1].configure({controller:t})}))},Object.defineProperty(t.prototype,"labelsVisible",{get:function(){return!this.suspended&&this.layer.labelingInfo&&this.layer.labelsVisible},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numFeatures",{get:function(){var e=0;return this.attached&&this._tileStrategy.tiles.forEach(function(t){e+=t.iconDisplayRecords?t.iconDisplayRecords.length:0}),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderingConfigHash",{get:function(){if(!this.layer)return null;var e=this.layer,t=e.definitionExpression,r=e.historicMoment,n=e.outFields,i=e.renderer,o=e.labelingInfo;return JSON.stringify({definitionExpression:t,historicMoment:r,outFields:n.slice().sort(),renderer:i,labelingInfo:o})},enumerable:!0,configurable:!0}),t.prototype.highlight=function(e,t){var r,n=this;return e instanceof a?r=[e.getAttribute(this.layer.objectIdField||"__OBJECTID")]:"number"==typeof e?r=[e]:u.isCollection(e)?r=e.map(function(e){return e&&e.getAttribute(n.layer.objectIdField)}).toArray():Array.isArray(e)&&e.length>0&&(r="number"==typeof e[0]?e:e.map(function(e){return e&&e.getAttribute(n.layer.objectIdField)})),(r=r.filter(function(e){return null!=e}))&&r.length&&"highlight"in this.tileRenderer?this.tileRenderer.highlight(r):{remove:function(){}}},t.prototype.hitTest=function(e,t){var r=this;return this.suspended||!this.tileRenderer?p.resolve(null):this.tileRenderer.hitTest(e,t).then(function(e){return 0===e.length?null:r._proxy.queryFeatures(new f({objectIds:e,outSpatialReference:r.view.spatialReference,returnGeometry:!0})).then(function(e){if(!e.features[0])return null;var t=a.fromJSON(e.features[0]);return t.layer=r.layer,t.sourceLayer=r.layer,t.geometry&&(t.geometry.spatialReference=r.view.spatialReference),t})})},t.prototype.queryFeatures=function(e){var t=this;return this.queryFeaturesJSON(e).then(function(e){var r=y.fromJSON(e);return r.features.forEach(function(e){e.layer=t.layer,e.sourceLayer=t.layer}),r})},t.prototype.queryFeaturesJSON=function(e){return this._proxy.queryFeatures(this._cleanUpQuery(e))},t.prototype.queryObjectIds=function(e){return this._proxy.queryObjectIds(this._cleanUpQuery(e))},t.prototype.queryFeatureCount=function(e){return this._proxy.queryFeatureCount(this._cleanUpQuery(e))},t.prototype.queryExtent=function(e){return this._proxy.queryExtent(this._cleanUpQuery(e)).then(function(e){return{count:e.count,extent:s.Extent.fromJSON(e.extent)}})},t.prototype.update=function(e){this.attached&&this._tileStrategy&&this.tileRenderer&&(this._tileStrategy.update(e)||this.requestUpdate(),this._proxy.setViewState(e.state),this.notifyChange("numFeatures"),this.notifyChange("updating"))},t.prototype.attach=function(){var e=this;this._tileStrategy=new O({cachePolicy:"purge",acquireTile:function(t){return e._acquireTile(t)},releaseTile:function(t){return e._releaseTile(t)},tileInfoView:this.view.featuresTilingScheme,buffer:0}),this.handles.add([c.init(this,"layer.processing.version",function(t){e._proxy.redraw()}),this.layer.on("edits",function(t){e._proxy.onEdits(t)}),c.init(this,"renderingConfigHash",function(){return e._renderingConfigHashChanged()}),this.view.watch("highlightOptions.color,highlightOptions.fillOpacity,highlightOptions.haloOpacity",function(){e.container.requestRender()})])},t.prototype.detach=function(){this.container.removeAllChildren(),this.handles.remove(this),this._tileRendererPromise=null,this._pipelineIsUpdating=!1,this.tileRenderer&&(this.tileRenderer.uninstall(this.container),this.tileRenderer=null),this._tileStrategy&&(this._tileStrategy.destroy(),this._tileStrategy=null)},t.prototype.moveStart=function(){this.requestUpdate()},t.prototype.viewChange=function(){this.requestUpdate()},t.prototype.moveEnd=function(){this.requestUpdate()},t.prototype.getViewSpatialReference=function(){return this.view.spatialReference},t.prototype.createFetchPopupFeaturesQueryGeometry=function(e,t){return R.createQueryGeometry(e,t,this.view)},t.prototype.doRefresh=function(){this._proxy.refresh()},t.prototype.isUpdating=function(){return null!=this.layer.renderer&&(null==this.tileRenderer||this._pipelineIsUpdating||this.tileRenderer.updating)},t.prototype._createClientOptions=function(){var e=this;return{executeProcessing:function(t){var r=e.layer.processing;return r?r.process(t.featureSet,r.options)||p.reject(new l("FeatureLayer","invalid processing.process() method, returns nothing")):t.featureSet},setUpdating:function(t){e._pipelineIsUpdating=t,e.notifyChange("updating")}}},t.prototype._cleanUpQuery=function(e){var t=e?x(e):new f;return t.outSpatialReference||(t.outSpatialReference=this.view.spatialReference),t},t.prototype._createProxy=function(){return new _.default({layer:this.layer,featuresTiling:this.view.featuresTilingScheme,client:this._createClientOptions()})},t.prototype._acquireTile=function(e){var t=this,r=this.tileRenderer.acquireTile(e);return r.once("attach",function(){t.requestUpdate()}),r},t.prototype._releaseTile=function(e){this.tileRenderer.releaseTile(e)},t.prototype._renderingConfigHashChanged=function(){var e=this,t=this._tileRendererPromise=b.createOrReuseTileRenderer(this.tileRenderer,this.layer.renderer,{layerView:this,tileInfoView:this.view.featuresTilingScheme,layer:this.layer,highlightOptions:this.view.highlightOptions}).then(function(r){if(e._tileRendererPromise===t&&(e._tileRendererPromise=null,e.tileRenderer!==r&&(e._tileStrategy.clear(),e.tileRenderer&&(e.tileRenderer.uninstall(e.container),e.tileRenderer.destroy()),e.tileRenderer=e._proxy.client.tileRenderer=r,r&&r.install(e.container),e.requestUpdate()),r)){var n=r.getProcessorConfiguration();e.tileRenderer.wouldClear(n)?(e.tileRenderer.clear(),e.tileRenderer.applyConfiguration(n),e._proxy.configure({processor:n}),e.requestUpdate()):e.tileRenderer.needsProcessorReconfiguration(n)?(e._proxy.configure({processor:n}),e.requestUpdate()):(e.tileRenderer.applyConfiguration(n),e.requestUpdate())}},function(){return e._tileRendererPromise=null})},n([d.property()],t.prototype,"_pipelineIsUpdating",void 0),n([d.property({dependsOn:["suspended","layer.labelingInfo","layer.labelsVisible"]})],t.prototype,"labelsVisible",null),n([d.property()],t.prototype,"numFeatures",null),n([d.property({dependsOn:["layer.renderer","layer.outFields","layer.definitionExpression","layer.historicMoment","layer.labelingInfo"]})],t.prototype,"renderingConfigHash",null),n([d.property()],t.prototype,"tileRenderer",void 0),n([d.property({dependsOn:["layer.renderer","tileRenderer.updating"]})],t.prototype,"updating",void 0),n([d.subclass("esri.views.2d.layers.FeatureLayerView2D")],t)}(d.declared(g,w))}.apply(null,n))||(e.exports=i)},1393:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(2),r(1),r(5),r(14),r(0)],void 0===(i=function(e,t,r,n,i,o,s){return function(e){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=e.call(this)||this;return n.handles=new o,n}return r(t,e),t.prototype.destroy=function(){this.handles.destroy()},n([s.property({readOnly:!0})],t.prototype,"handles",void 0),n([s.subclass("esri.core.HandleOwner")],t)}(s.declared(i))}.apply(null,n))||(e.exports=i)},1411:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(25),r(1434)],void 0===(i=function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._renderRequestedCalled=!1,t._attached=!1,t._isReady=!1,t._opacity=1,t.renderRequested=!1,t._visible=!0,t}return r(t,e),Object.defineProperty(t.prototype,"attached",{get:function(){return this._attached},set:function(e){this._attached!==e&&(this._attached=e,e?this.hasEventListener("attach")&&this.emit("attach"):this.hasEventListener("detach")&&this.emit("detach"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isReady",{get:function(){return this._attached&&this._isReady},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opacity",{get:function(){return this._opacity},set:function(e){this._opacity!==e&&(this._opacity=e,this.requestRender())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this._visible},set:function(e){this._visible!==e&&(this._visible=e,this.requestRender())},enumerable:!0,configurable:!0}),t.prototype.attach=function(){return this.ready(),!0},t.prototype.detach=function(){},t.prototype.processRender=function(e){this.visible&&this.attached&&(this._renderRequestedCalled=!1,this.doRender(e),this._renderRequestedCalled||(this.renderRequested=!1),this.hasEventListener("post-render")&&this.emit("post-render"))},t.prototype.requestRender=function(){var e=this.renderRequested;this._renderRequestedCalled=!0,this.renderRequested=!0,this.parent&&this.parent.requestChildRender(this),e!==this.renderRequested&&this.hasEventListener("will-render")&&this.emit("will-render")},t.prototype.dispose=function(){},t.prototype.ready=function(){this._isReady=!0,this.hasEventListener("isReady")&&this.emit("isReady")},t}(n.Evented);t.DisplayObject=i}.apply(null,n))||(e.exports=i)},1412:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(2),r(1),r(5),r(0)],void 0===(i=function(e,t,r,n,i,o){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refreshTimestamp=null,t}return r(t,e),t.prototype.refresh=function(e){void 0===e&&(e=Date.now()),this._set("refreshTimestamp",e),this.doRefresh&&this.doRefresh()},n([o.property()],t.prototype,"layer",void 0),n([o.aliasOf("layer.refreshInterval")],t.prototype,"refreshInterval",void 0),n([o.property({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),n([o.subclass("esri.layers.mixins.RefreshableLayerView")],t)}(o.declared(i))}.apply(null,n))||(e.exports=i)},1413:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(2),r(1),r(27),r(1393),r(121),r(7),r(159),r(8),r(0)],void 0===(i=function(e,t,r,n,i,o,s,a,u,l,p){return function(e){function t(t){var r=e.call(this)||this;return r.layer=null,r.parent=null,r.view=null,r}return r(t,e),t.prototype.initialize=function(){var e=this;this.addResolvingPromise(this.layer),this.when().catch(function(t){if("layerview:create-error"!==t.name){var r=e.layer&&e.layer.id||"no id",n=e.layer&&e.layer.title||"no title";return a.getLogger(e.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '"+n+"', id: '"+r+"')",t),l.reject(t)}})},t.prototype.destroy=function(){this.layer=this.view=this.parent=null},Object.defineProperty(t.prototype,"suspended",{get:function(){return!this.canResume()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return!this.suspended&&this.isUpdating()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return!0===this.get("layer.visible")},set:function(e){void 0!==e?this._override("visible",e):this._clearOverride("visible")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullOpacity",{get:function(){var e=function(e){return null!=e?e:1};return e(this.get("layer.opacity"))*e(this.get("parent.fullOpacity"))},enumerable:!0,configurable:!0}),t.prototype.canResume=function(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1},t.prototype.isUpdating=function(){return!1},n([p.property()],t.prototype,"layer",void 0),n([p.property()],t.prototype,"parent",void 0),n([p.property({readOnly:!0,dependsOn:["view","visible","layer.loaded","parent.suspended"]})],t.prototype,"suspended",null),n([p.property({type:Boolean,dependsOn:["suspended"],readOnly:!0})],t.prototype,"updating",null),n([p.property()],t.prototype,"view",void 0),n([p.property({dependsOn:["layer.visible"]})],t.prototype,"visible",null),n([p.property({dependsOn:["layer.opacity","parent.fullOpacity"]})],t.prototype,"fullOpacity",null),n([p.subclass("esri.views.layers.LayerView")],t)}(p.declared(o,i,s.Identifiable,u))}.apply(null,n))||(e.exports=i)},1425:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(25),r(1411)],void 0===(i=function(e,t,r,n){var i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.ATTACHING=0]="ATTACHING",e[e.DETACHING=1]="DETACHING",e[e.RENDERING=2]="RENDERING",e[e.DONE=3]="DONE"}(i||(i={}));var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._childrenSet=new Set,t._childrenToAttach=[],t._childrenToDetach=[],t._renderPhase=i.DONE,t.children=[],t}return r(t,e),Object.defineProperty(t.prototype,"numChildren",{get:function(){return this.children.length},enumerable:!0,configurable:!0}),t.prototype.detach=function(){for(var e=0,t=this.children.concat(this._childrenToDetach);e<t.length;e++){var r=t[e];r.attached&&(this.detachChild(r),r.attached=!1,r.parent=null)}},t.prototype.doRender=function(e){var t=e.globalOpacity;e.globalOpacity*=this.opacity,this._renderPhase=i.ATTACHING,this.attachChildren(),this._renderPhase=i.DETACHING;for(var r=this._childrenToDetach;r.length>0;){var n=r.shift();this.detachChild(n),n.attached=!1,n.parent=null,n.stage=null}this._renderPhase=i.RENDERING,this.renderChildren(e),this._renderPhase=i.DONE,e.globalOpacity=t},t.prototype.addChild=function(e){return this.addChildAt(e,this.children.length)},t.prototype.addChildAt=function(e,t){if(void 0===t&&(t=this.numChildren),!e)return e;if(this.contains(e))return e;var r=e.parent;r&&r!==this&&r.removeChild(e),t>=this.numChildren?this.children.push(e):this.children.splice(t,0,e),this._childrenSet.add(e);var n=this._childrenToDetach.indexOf(e);return n>-1&&this._childrenToDetach.splice(n,1),this._childrenToAttach.push(e),this._renderPhase>=i.RENDERING&&this.requestRender(),e},t.prototype.contains=function(e){return this._childrenSet.has(e)},t.prototype.getChildIndex=function(e){return this.children.indexOf(e)},t.prototype.getChildAt=function(e){return e<0||e>this.children.length?null:this.children[e]},t.prototype.removeAllChildren=function(){for(var e=this.numChildren;e--;)this.removeChildAt(0)},t.prototype.removeChild=function(e){return this.contains(e)?this.removeChildAt(this.getChildIndex(e)):e},t.prototype.removeChildAt=function(e){var t;if(e<0||e>=this.children.length)return null;if(t=this.children.splice(e,1)[0],function(e,t){e.delete(t)}(this._childrenSet,t),t.attached)this._childrenToDetach.push(t),this._renderPhase>=i.RENDERING&&this.requestRender();else{var r=this._childrenToAttach.indexOf(t);r>-1&&this._childrenToAttach.splice(r,1)}return t},t.prototype.requestChildRender=function(e){e&&e.parent===this&&this._renderPhase>=i.RENDERING&&this.requestRender()},t.prototype.setChildIndex=function(e,t){var r=this.getChildIndex(e);r>-1&&(this.children.splice(r,1),this.children.splice(t,0,e),this._renderPhase>=i.RENDERING&&this.requestRender())},t.prototype.sortChildren=function(e){return this._renderPhase>i.RENDERING&&this.requestRender(),this.children.sort(e)},t.prototype.attachChildren=function(){var e=this._childrenToAttach;if(0!==e.length)for(var t=0,r=!1;!r;){var n=e[t];n.parent=this,n.stage=this.stage,this.attachChild(n)?(n.attached=!0,e.splice(t,1)):++t,r=e.length===t}},t.prototype.renderChildren=function(e){for(var t=this.children,r=t.length,n=0;n<r;n++)t[n].processRender(e)},t.prototype.attachChild=function(e){return e.attach()},t.prototype.detachChild=function(e){e.detach()},t}(n.DisplayObject);t.Container=o}.apply(null,n))||(e.exports=i)},1434:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(25),r(73),r(52)],void 0===(i=function(e,t,r,n,i){Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.prototype.on=function(e,t){return n.after(this,"on"+e,t,!0)},e.prototype.once=function(e,t){return i.once(this,e,t)},e.prototype.emit=function(e){i.emit(this,e,this)},e.prototype.hasEventListener=function(e){var t="on"+e;return!(!this[t]||!this[t].after)},e}();t.Evented=o,t.EventedMixin=function(e){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.on=function(e,t){return n.after(this,"on"+e,t,!0)},t.prototype.once=function(e,t){return i.once(this,e,t)},t.prototype.emit=function(e,t){i.emit(this,e,t)},t.prototype.hasEventListener=function(e){var t="on"+e;return!(!this[t]||!this[t].after)},t}(e)}}.apply(null,n))||(e.exports=i)},1438:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){function r(e,t){return t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):t&&t.yoffset?Math.max(e,Math.abs(t.yoffset)):e}Object.defineProperty(t,"__esModule",{value:!0}),t.calculateTolerance=function(e){if(!e)return 6;if("simple"===e.type)return r(6,e.symbol);if("unique-value"===e.type){var t=6;return e.uniqueValueInfos.forEach(function(e){t=r(t,e.symbol)}),t}if("class-breaks"===e.type){var n=6;return e.classBreakInfos.forEach(function(e){n=r(n,e.symbol)}),n}return 6}}.apply(null,n))||(e.exports=i)},1456:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(2),r(1),r(15),r(0),r(1413)],void 0===(i=function(e,t,r,n,i,o,s){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.attached=!1,t.lastUpdateId=-1,t.moving=!1,t.updateRequested=!1,t}return r(t,e),t.prototype.initialize=function(){var e=this;this.when(function(){e.requestUpdate()}),i.init(this,"suspended",function(t){e.container.visible=!t,!t&&e.updateRequested&&e.view.requestLayerViewUpdate(e)},!0),i.init(this,"fullOpacity",function(t){e.container.opacity=t},!0);var t=function(){this.notifyChange("rendering")}.bind(this);this.container.on("post-render",t),this.container.on("will-render",t)},t.prototype.destroy=function(){this.attached&&(this.attached=!1,this.detach()),this.updateRequested=!1,this.layer=null},Object.defineProperty(t.prototype,"rendering",{get:function(){return this.attached&&!this.suspended&&(this.moving||this.container.renderRequested||this.isRendering())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return!this.suspended&&(!this.attached||this.updateRequested||this.isUpdating())},enumerable:!0,configurable:!0}),t.prototype.isVisibleAtScale=function(e){var t=!0,r=this.layer,n=r.minScale,i=r.maxScale;if(null!=n&&null!=i){var o=!n,s=!i;!o&&e<=n&&(o=!0),!s&&e>=i&&(s=!0),t=o&&s}return t},t.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestLayerViewUpdate(this))},t.prototype.processUpdate=function(e){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",e),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(e))):this.updateRequested=!1},t.prototype.isUpdating=function(){return!1},t.prototype.isRendering=function(){return!1},t.prototype.canResume=function(){var e=this.inherited(arguments);return e&&(e=this.isVisibleAtScale(this.view.scale)),e},n([o.property()],t.prototype,"attached",void 0),n([o.property()],t.prototype,"container",void 0),n([o.property()],t.prototype,"moving",void 0),n([o.property({dependsOn:["attached","suspended","moving"]})],t.prototype,"rendering",null),n([o.property({dependsOn:["view.scale","layer.minScale","layer.maxScale"]})],t.prototype,"suspended",void 0),n([o.property({readOnly:!0})],t.prototype,"updateParameters",void 0),n([o.property()],t.prototype,"updateRequested",void 0),n([o.property({dependsOn:["updateRequested","attached"]})],t.prototype,"updating",null),n([o.property()],t.prototype,"view",void 0),n([o.subclass("esri.views.2d.layers.LayerView2D")],t)}(o.declared(s))}.apply(null,n))||(e.exports=i)},1638:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.hasRequiredFields=function(e,t){if(!t)return!0;var n=e.attributes||r;return!t.some(function(e){return!(e in n)})};var r={}}.apply(null,n))||(e.exports=i)},1639:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){function r(e,t){if(!e.fields)return!1;var r=t.toLowerCase();return e.fields.some(function(e){return e.name.toLowerCase()===r})}Object.defineProperty(t,"__esModule",{value:!0}),t.getRequiredFields=function(e){var t=e.popupTemplate,n=t.requiredFields,i=t.lastEditInfoEnabled,o=e.objectIdField,s=e.editFieldsInfo;if(n&&1===n.length&&"*"===n[0])return n;var a=n&&n.filter(function(t){return r(e,t)});return s&&i&&(s.creatorField&&a.push(s.creatorField),s.creationDateField&&a.push(s.creationDateField),s.editorField&&a.push(s.editorField),s.editDateField&&a.push(s.editDateField)),a&&o&&r(e,o)&&-1===a.indexOf(o)&&a.push(o),a}}.apply(null,n))||(e.exports=i)},1737:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(25),r(1),r(17)],void 0===(i=function(e,t,r,n,i){Object.defineProperty(t,"__esModule",{value:!0}),t.createQueryGeometry=function(e,t,r){var n=r.get("state.resolution"),o=t*("number"==typeof n?n:1),s=e.clone().offset(-o,-o),a=e.clone().offset(o,o),u=r.spatialReference;return new i({xmin:Math.min(s.x,a.x),ymin:Math.min(s.y,a.y),xmax:Math.max(s.x,a.x),ymax:Math.max(s.y,a.y),spatialReference:u})}}.apply(null,n))||(e.exports=i)},1776:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(10),r(9),r(8)],void 0===(i=function(e,t,n,i,o){Object.defineProperty(t,"__esModule",{value:!0}),t.getControllerConfiguration=function(e){var t=e.source;return"stream"===e.type?o.resolve().then(function(){return{type:"stream",filter:function(e){if(!e)return null;var t={};return e.geometry&&(t.geometry=e.geometry.toJSON()),e.where&&(t.where=e.where),t}(e.filter),purgeOptions:e.purgeOptions}}):e.capabilities.operations.supportsQuery?function(e){return e&&"openPorts"in e}(t)?o.resolve().then(function(){return{type:"memory",processing:e.processing&&e.processing.toWorker()||null}}):o.resolve({type:"on-demand",gdbVersion:e.gdbVersion,historicMoment:e.historicMoment&&e.historicMoment.getTime(),processing:e.processing&&e.processing.toWorker()||null}):o.reject(new i("graphicscontroller:query-capability-required","Service requires query capabilities to be used as a feature layer",{layer:e}))},t.createController=function(e,t){return("memory"===e?o.create(function(e){return Promise.all([r.e(37),r.e(61)]).then(function(){var t=[r(1933)];e.apply(null,t)}.bind(this)).catch(r.oe)}):"stream"===e?o.create(function(e){return Promise.all([r.e(4),r.e(11),r.e(14),r.e(62)]).then(function(){var t=[r(1935)];e.apply(null,t)}.bind(this)).catch(r.oe)}):o.create(function(e){return Promise.all([r.e(4),r.e(11),r.e(14),r.e(37),r.e(63)]).then(function(){var t=[r(1936)];e.apply(null,t)}.bind(this)).catch(r.oe)})).then(function(e){return e.default}).then(function(e){var r=t.serviceAndViewInfo,i=t.remoteClient,o=t.tileStore;return new e(n({},r,{tileStore:o,remoteClient:i}))})}}.apply(null,n))||(e.exports=i)},1835:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(2),r(1),r(69),r(9),r(7),r(8),r(0),r(1438),r(46),r(1638),r(1412),r(1639)],void 0===(i=function(e,t,r,n,i,o,s,a,u,l,p,c,d,h){var y=s.getLogger("esri.views.layers.FeatureLayerView");return function(e){function t(t){var r=e.call(this,t)||this;return r.layer=null,r}return r(t,e),Object.defineProperty(t.prototype,"maximumNumberOfFeatures",{get:function(){return 0},set:function(e){y.error("#maximumNumberOfFeatures=","Setting maximum number of features is not supported")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maximumNumberOfFeaturesExceeded",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.highlight=function(e,t){return this.inherited(arguments)},t.prototype.queryFeatures=function(e){return this.inherited(arguments)},t.prototype.queryObjectIds=function(e){return this.inherited(arguments)},t.prototype.queryFeatureCount=function(e){return this.inherited(arguments)},t.prototype.queryExtent=function(e){return this.inherited(arguments)},t.prototype.fetchPopupFeatures=function(e,t){var r=this._validateFetchPopupFeatures();if(r)return a.reject(r);var n=this._fetchClientPopupFeatures(t);if(!e)return n;var o=this._fetchServicePopupFeatures(e,t);return a.eachAlwaysValues([n,o]).then(i.concatAll)},t.prototype._validateFetchPopupFeatures=function(){var e=this.layer,t=e.popupEnabled,r=e.popupTemplate;return t?r?void 0:new o("featurelayerview:fetchPopupFeatures","Layer does not define a popup template",{layer:e}):new o("featurelayerview:fetchPopupFeatures","Popups are disabled",{layer:e})},t.prototype._fetchClientPopupFeatures=function(e){if(!e||0===e.length)return a.resolve([]);for(var t=[],r=[],n=this.layer,i=p.hasGeometryOperations(n.popupTemplate),o=this._createPopupQuery(),s=0,u=e;s<u.length;s++){var l=u[s];i||!c.hasRequiredFields(l,o.outFields)?r.push(l):t.push(l)}return 0===r.length?a.resolve(t):(o.objectIds=r.map(function(e){return e.attributes[n.objectIdField]}),n.queryFeatures(o).then(function(e){return t.concat(e.features)}).catch(function(){return r}))},t.prototype._fetchServicePopupFeatures=function(e,t){var r=this._createPopupQuery(),n=this.layer,i=n.renderer,o=l.calculateTolerance(i);r.geometry=this.createFetchPopupFeaturesQueryGeometry(e,o);for(var s=new Set,a=n.objectIdField,u=0,p=t;u<p.length;u++){var c=p[u];s.add(c.attributes[a])}return n.queryFeatures(r).then(function(e){return e.features.filter(function(e){return!s.has(e.attributes[a])})})},t.prototype._createPopupQuery=function(){var e=this.layer.createQuery();return e.returnGeometry=!0,e.returnZ=!0,e.returnM=!0,e.outFields=h.getRequiredFields(this.layer),e.outSpatialReference=this.getViewSpatialReference(),e},n([u.property()],t.prototype,"layer",void 0),n([u.property({type:Number})],t.prototype,"maximumNumberOfFeatures",null),n([u.property({readOnly:!0,type:Boolean})],t.prototype,"maximumNumberOfFeaturesExceeded",null),n([u.subclass("esri.views.layers.FeatureLayerView")],t)}(u.declared(d))}.apply(null,n))||(e.exports=i)},2315:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(510),r(8)],void 0===(i=function(e,t,n,i){Object.defineProperty(t,"__esModule",{value:!0}),t.createOrReuseTileRenderer=function(e,t,o){if(e&&e.supportsRenderer(t))return i.create(function(t){return n(function(){return t(e)})});if(!t)return i.resolve(null);switch(t.type){case"class-breaks":case"simple":case"unique-value":return i.create(function(e){n(function(){return Promise.all([r.e(9),r.e(91)]).then(function(){var t=[r(2361)];e.apply(null,t)}.bind(this)).catch(r.oe)})}).then(function(e){return e.default}).then(function(e){return new e(o)});case"heatmap":return i.create(function(e){n(function(){return r.e(66).then(function(){var t=[r(2363)];e.apply(null,t)}.bind(this)).catch(r.oe)})}).then(function(e){return e.default}).then(function(e){return new e(o)})}return i.resolve(null)}}.apply(null,n))||(e.exports=i)},2316:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(2),r(1),r(10),r(5),r(159),r(8),r(160),r(124),r(0),r(2317),r.dj.m(e)],void 0===(i=function(e,t,r,n,i,o,s,a,u,l,p,c,d){Object.defineProperty(t,"__esModule",{value:!0});var h=function(t){function i(e){var r=t.call(this,e)||this;return r.tileRenderer=null,r}return r(i,t),i.prototype.initialize=function(){var t=this;this.addResolvingPromise(l.open(u.getAbsMid("../features/Pipeline",e,d),{client:this.client,strategy:"dedicated"}).then(function(e){return t._connection=e,t._getStartupOptions(t.layer,t.featuresTiling)}).then(function(e){return function(e){return Array.isArray(e)}(e.service.source)?t._connection.invoke("startup",e,{transferList:e.service.source}):t._connection.invoke("startup",e)}))},i.prototype.destroy=function(){var e=this;this._connection&&this._connection.invoke("destroy").then(function(){return e._connection.close()})},i.prototype.configure=function(e){return this._connection.invoke("configure",e)},i.prototype.refresh=function(){return this._connection.invoke("controller.refresh")},i.prototype.redraw=function(){return this._connection.invoke("controller.redraw")},i.prototype.setViewState=function(e){return this._connection.invoke("setViewState",e.toJSON())},i.prototype.queryFeatures=function(e){return this._connection.invoke("controller.queryFeatures",e.toJSON())},i.prototype.queryObjectIds=function(e){return this._connection.invoke("controller.queryObjectIds",e.toJSON())},i.prototype.queryFeatureCount=function(e){return this._connection.invoke("controller.queryFeatureCount",e.toJSON())},i.prototype.queryExtent=function(e){return this._connection.invoke("controller.queryExtent",e.toJSON())},i.prototype.queryLatestObservations=function(e){return this._connection.invoke("controller.queryLatestObservations",e.toJSON())},i.prototype.onEdits=function(e){var t=e.addedFeatures,r=e.deletedFeatures,n=e.updatedFeatures;return this._connection.invoke("controller.onEdits",{addedFeatures:t,deletedFeatures:r,updatedFeatures:n})},i.prototype.enableEvent=function(e,t){return this._connection.invoke("controller.enableEvent",{name:e,value:t})},i.prototype._getStartupOptions=function(e,t){var r=e.capabilities,n=e.objectIdField,i=e.source,o=e.fields.map(function(e){return e.toJSON()}),s=e.fullExtent&&e.fullExtent.toJSON(),u=c.toJSONGeometryType(e.geometryType);if(function(e){return e&&"openPorts"in e}(i))return i.openPorts().then(function(e){return{service:{capabilities:r,fields:o,fullExtent:s,geometryType:u,objectIdField:n,source:e},tileInfo:t.tileInfo.toJSON()}});if("stream"===e.type){var l=e.source,p=l.relatedLayerDefinition,d=l.archivedLayerDefinition,h=p&&{capabilities:p.capabilities,fields:p.fields,fullExtent:p.extent,geometryType:p.geometryType,objectIdField:p.objectIdField,source:l.layerDefinition.relatedFeatures.featuresUrl,joinField:l.layerDefinition.relatedFeatures.joinField}||null,y=d&&{capabilities:d.capabilities,fields:d.fields,fullExtent:d.extent,geometryType:d.geometryType,objectIdField:d.objectIdField,source:l.layerDefinition.keepLatestArchive.featuresUrl,maximumFeatureAge:l.layerDefinition.keepLatestArchive.maximumFeatureAge,updateInterval:l.layerDefinition.keepLatestArchive.updateInterval}||null;return a.resolve({service:{capabilities:e.capabilities,fields:e.fields.map(function(e){return e.toJSON()}),fullExtent:e.fullExtent&&e.fullExtent.toJSON()||null,geometryType:c.toJSONGeometryType(e.geometryType),objectIdField:e.objectIdField||"__OBJECTID",source:e.parsedUrl.path,buddyLayers:{relatedFeatures:h,keepLatestArchive:y},streamUrls:l.layerDefinition.streamUrls,timeInfo:l.layerDefinition.timeInfo,content:e.parsedUrl.query},tileInfo:t.tileInfo.toJSON()})}var f=e.dynamicDataSource?e.parsedUrl:e.url+"/"+e.layerId;return a.resolve({service:{capabilities:r,fields:o,fullExtent:s,geometryType:u,objectIdField:n,source:f},tileInfo:t.tileInfo.toJSON()})},n([p.property({constructOnly:!0})],i.prototype,"client",void 0),n([p.property({constructOnly:!0})],i.prototype,"layer",void 0),n([p.property({constructOnly:!0})],i.prototype,"featuresTiling",void 0),n([p.property()],i.prototype,"tileRenderer",void 0),n([p.subclass()],i)}(p.declared(o,s));t.default=h}.apply(null,n))||(e.exports=i)},2317:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(11)],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});t.toJSONGeometryType=function(e){return n.toJSON(e)}}.apply(null,n))||(e.exports=i)}}]);